#summary One-sentence summary of this page.

= Fastdroid VNC server for Android=

== The first Android VNC server that really works!==

Started with original fbvncserver for the iPAQ and Zaurus. 

Modified by Jim Huang <jserv.tw@gmail.com>
  * Simplified and sizing down
  * Performance tweaks

Modified by Steve Guo (letsgoustc)
  * Added keyboard/pointer input

*Modified by Danke Xie for Android (danke.xie@gmail.com)*
  * Added input device search to support different Android devices
  * Added kernel vnckbd driver to allow full-keyboard input on 12-key hw
  * Supports Android framebuffer double buffering
  * Performance enhancement and fixes of GCC warnings in libvncserver-0.9.7

==ANDROID QUICK INSTALL==

  * Download the binary here: http://code.google.com/p/fastdroid-vnc/downloads/list
  * Use adb to push to android 
{{{
$ adb push fastdroid-vnc /data/
}}}
  * Run on the phone
{{{
$ adb shell
# cd data
# chmod 777 fastdroid-vnc
# ./fastdroid-vnc
}}}

==ANDROID BUILD==

Copy the directory fastdroid-vnc to any Android build directory, run
a build command from Android root
{{{
  $ make -j4 fastdroid-vnc
}}}

Push the binary to the device
{{{
  $ adb push system/bin/fastdroid-vnc /data/
}}}

Modify file permission and run
{{{
  $ adb shell
  # cd /data
  # chmod 777 fastdroid-vnc
  # ./fastdroid-vnc
}}}

==LINUX BUILD==

This Android VNC server may also work on other Linux-based systems. An example
Makefile is included, which should be able to build the binary with the make command.

==INPUT SUPPORT==

This version of the fbvncserver can forward input events from the VNC client 
to Android (based on Steve Guo's work). The way it works is converting remote 
VNC inputs to Linux input events and send to devices `/dev/input/event<N>`. 

Each input device has a specific `<N>` value. The server can automatically detect
the `<N>` value based on the name string of the device.  It can enumerate the input 
devices under `/device/input/event<N>`, and select the device matching the 
keywords in fbvncserver.c. For example, they keywords are

{{{
static const char *KBD_PATTERNS[] = {"VNC", "key", "qwerty", NULL};
static const char *TOUCH_PATTERNS[] = {"touch", "qwerty", NULL};
}}}

If an input device contains the strings in KBD_PATTERNS, it will be used to send
the keyboard events. The same is true fo rthe touchpad devices matching  
the strings in TOUCH_PATTERNS. If multiple devices match, the one matching the 
left-most pattern is used.

If a matched device is not found, then default input devices will be used. The
user can also specify the keyboard and touchpad devices by the command line:

{{{	
-k <keyboard-device-path>
-t <touchpad-device-path>
}}}

Information about the input devices and its name strings can be found in 
`/proc/bus/input/devices`.

==INPUT DRIVER (optional)==

If the device has a numeric keypad, the input device cannot be used by the
VNC server to send alphabetic inputs to the Android framework. In this case, 
one can install the "vnckbd" driver included in this release. The instructions
and source can be found in the kernel subdirectory.

==VNC PERFORMANCE ENHANCEMENT==

This VNC server is based on libvncserver 0.9.7. Several optimizations
are made upon the server to improve the response time to VNC clients, and 
reduced background activity when there is no active clients.

It also supports the double buffering mechanism used by Android. This can 
avoid frame misses found in previous Android framebuffer VNC servers.

  * Fixed VNC frame misses under Android double-buffering framework
  * Removed 100ms wake-ups in connection waiting
  * Sped up message queue draining to allow faster responses
  * Fixed misc libvncserver warnings